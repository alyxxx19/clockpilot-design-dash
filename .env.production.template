# ========================
# CLOCKPILOT - PRODUCTION Configuration Template
# ========================
# IMPORTANT: This is a template for production environment
# Copy this file to .env.production and update with actual production values
# NEVER commit .env.production to version control

# ========================
# ENVIRONMENT
# ========================
NODE_ENV=production
PORT=5000
BASE_URL=https://clockpilot.yourdomain.com

# ========================
# DATABASE CONFIGURATION
# ========================
# Production PostgreSQL (use managed service like AWS RDS, Google Cloud SQL)
DATABASE_URL=postgresql://clockpilot_prod:REPLACE_WITH_SECURE_PASSWORD@your-db-host:5432/clockpilot_prod
PGHOST=your-db-host
PGPORT=5432
PGUSER=clockpilot_prod
PGPASSWORD=REPLACE_WITH_SECURE_PASSWORD
PGDATABASE=clockpilot_prod
DATABASE_POOL_SIZE=20

# ========================
# SECURITY & AUTHENTICATION
# ========================
# CRITICAL: Generate strong secrets with: openssl rand -base64 64
JWT_SECRET=REPLACE_WITH_64_CHAR_RANDOM_STRING
SESSION_SECRET=REPLACE_WITH_64_CHAR_RANDOM_STRING
BCRYPT_ROUNDS=12

# JWT expiration (shorter for production)
JWT_ACCESS_TOKEN_EXPIRES_IN=15m
JWT_REFRESH_TOKEN_EXPIRES_IN=7d

# ========================
# PRODUCTION SECURITY
# ========================
FORCE_HTTPS=true
SECURE_COOKIES=true
CORS_ORIGINS=https://clockpilot.yourdomain.com
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ========================
# REDIS CONFIGURATION
# ========================
# Production Redis (use managed service like AWS ElastiCache)
REDIS_URL=redis://:REPLACE_WITH_REDIS_PASSWORD@your-redis-host:6379
REDIS_PASSWORD=REPLACE_WITH_REDIS_PASSWORD

# ========================
# MONITORING & LOGGING
# ========================
LOG_LEVEL=warn
ENABLE_REQUEST_LOGGING=true
SENTRY_DSN=https://REPLACE_WITH_SENTRY_DSN

# Health check configuration
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_REDIS=true

# ========================
# PERFORMANCE
# ========================
REQUEST_TIMEOUT=30000
ENABLE_COMPRESSION=true
ENABLE_ETAG=true

# ========================
# FEATURE FLAGS
# ========================
FEATURE_NOTIFICATIONS=true
FEATURE_EXPORT_PDF=true
FEATURE_BULK_OPERATIONS=true
FEATURE_ADVANCED_REPORTING=true
ENABLE_API_DOCS=false

# ========================
# BACKUP CONFIGURATION
# ========================
# AWS S3 for database backups
AWS_ACCESS_KEY_ID=REPLACE_WITH_AWS_KEY
AWS_SECRET_ACCESS_KEY=REPLACE_WITH_AWS_SECRET
AWS_REGION=eu-west-3
AWS_BACKUP_BUCKET=clockpilot-backups-prod

# ========================
# SMTP CONFIGURATION
# ========================
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_USER=REPLACE_WITH_SMTP_USER
SMTP_PASSWORD=REPLACE_WITH_SMTP_PASSWORD
SMTP_FROM=ClockPilot Production <noreply@clockpilot.yourdomain.com>

# ========================
# LOCALIZATION
# ========================
DEFAULT_LANGUAGE=fr
DEFAULT_TIMEZONE=Europe/Paris

# ========================
# DEVELOPMENT FLAGS (DISABLED IN PRODUCTION)
# ========================
DEBUG=false
SEED_DEMO_DATA=false

# ========================
# PROMETHEUS METRICS
# ========================
ENABLE_METRICS=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# ========================
# WEBHOOKS
# ========================
WEBHOOK_SLACK_URL=REPLACE_WITH_SLACK_WEBHOOK
WEBHOOK_TEAMS_URL=REPLACE_WITH_TEAMS_WEBHOOK

# ========================
# INSTRUCTIONS FOR DEPLOYMENT
# ========================
# 1. Copy this file: cp .env.production.template .env.production
# 2. Replace all REPLACE_WITH_* values with actual production values
# 3. Generate strong secrets: openssl rand -base64 64
# 4. Verify all URLs and endpoints are correct
# 5. Test configuration: ./scripts/deploy.sh --backup-only
# 6. Deploy: ./scripts/deploy.sh